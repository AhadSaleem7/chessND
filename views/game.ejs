<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title><%= title %></title>
    <link rel="icon" href="/images/favicon.ico" />
    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"
        integrity="sha384-mkQ3/7FUtcGyoppY6bz/PORYoGqOl7/aSUMn2ymDOJcapfS6PHqxhRTMh1RR0Q6+"
        crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/css/chessgame.css" />
</head>
<body class="min-h-screen overflow-x-auto">
    
    <!-- Logo - Fixed top-left, no overlap -->
    <img src="/images/chess.png" alt="Chess Logo" class="logo" />
    
    <!-- Left side message - Fixed bottom-left, no overlap -->
    <div id="game-message" class="left-side-message">A non-descriminative chess app</div>
    
    <!-- Right side message - Fixed below logo, no overlap -->
    <div class="right-side-message">
        <p class="text-white font-bold">joining a game...</p>
    </div>
    
    <!-- Main game area - Centered, no conflicts -->
    <div class="flex flex-col items-center justify-center min-h-screen px-4 py-8 pt-20">
        
        <!-- Enhanced message area -->
        <div id="message-area" class="game-message-area min-h-[3rem] flex items-center justify-center text-white text-base sm:text-lg md:text-xl font-bold mb-6 sm:mb-8 text-center w-full max-w-2xl px-6 py-3"></div>
        
        <!-- Enhanced board container -->
        <div class="board-container flex flex-col items-center p-4 sm:p-6 md:p-8">
            
            <!-- Files notation (top) -->
            <div class="grid grid-cols-8 gap-1 sm:gap-2 text-xs sm:text-sm md:text-base notation select-none font-bold tracking-wider mb-2 sm:mb-3">
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">A</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">B</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">C</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">D</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">E</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">F</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">G</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">H</span>
            </div>
            
            <div class="flex items-center">
                <!-- Ranks notation (left) -->
                <div class="grid grid-rows-8 gap-1 sm:gap-2 text-xs sm:text-sm md:text-base notation select-none font-bold mr-2 sm:mr-3">
                    <span class="flex items-center justify-center h-[42px] sm:h-[50px] md:h-[58px] lg:h-[66px] xl:h-[72px]">8</span>
                    <span class="flex items-center justify-center h-[42px] sm:h-[50px] md:h-[58px] lg:h-[66px] xl:h-[72px]">7</span>
                    <span class="flex items-center justify-center h-[42px] sm:h-[50px] md:h-[58px] lg:h-[66px] xl:h-[72px]">6</span>
                    <span class="flex items-center justify-center h-[42px] sm:h-[50px] md:h-[58px] lg:h-[66px] xl:h-[72px]">5</span>
                    <span class="flex items-center justify-center h-[42px] sm:h-[50px] md:h-[58px] lg:h-[66px] xl:h-[72px]">4</span>
                    <span class="flex items-center justify-center h-[42px] sm:h-[50px] md:h-[58px] lg:h-[66px] xl:h-[72px]">3</span>
                    <span class="flex items-center justify-center h-[42px] sm:h-[50px] md:h-[58px] lg:h-[66px] xl:h-[72px]">2</span>
                    <span class="flex items-center justify-center h-[42px] sm:h-[50px] md:h-[58px] lg:h-[66px] xl:h-[72px]">1</span>
                </div>
                
                <!-- Chessboard - Now properly sized and positioned -->
                <div class="chessboard"></div>
            </div>
            
            <!-- Files notation (bottom) -->
            <div class="grid grid-cols-8 gap-1 sm:gap-2 text-xs sm:text-sm md:text-base notation select-none font-bold tracking-wider mt-2 sm:mt-3">
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">A</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">B</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">C</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">D</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">E</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">F</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">G</span>
                <span class="flex justify-center w-[42px] sm:w-[50px] md:w-[58px] lg:w-[66px] xl:w-[72px]">H</span>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"
        integrity="sha512-xRllwz2gdZciIB+AkEbeq+gVhX8VB8XsfqeFbUh+SzHlN96dEduwtTuVuc2u9EROlmW9+yhRlxjif66ORpsgVA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        const socket = io();
        const roomId = "<%= roomId %>";
        const isRandom = "<%= typeof isRandom !== 'undefined' && isRandom %>" === "true";
        const playerName = localStorage.getItem('playerName') || prompt("Enter your name") || "Guest";

        if (isRandom) {
            socket.emit('joinRandom');
        } else {
            socket.emit('joinRoomByName', { roomId, playerName });
        }
    </script>
    <script src="/js/chessgame.js"></script>
</body>
</html>
